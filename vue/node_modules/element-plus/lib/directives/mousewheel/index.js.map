{"version":3,"file":"index.js","sources":["../../../../../packages/directives/mousewheel/index.ts"],"sourcesContent":["import normalizeWheel from 'normalize-wheel-es'\n\nimport type { ObjectDirective } from 'vue'\nimport type { NormalizedWheelEvent } from 'normalize-wheel-es'\n\nexport const SCOPE = '_Mousewheel'\n\ninterface WheelElement extends HTMLElement {\n  [SCOPE]: null | {\n    wheelHandler?: (event: WheelEvent) => void\n  }\n}\n\ntype MousewheelCallback = (\n  e: WheelEvent,\n  normalized: NormalizedWheelEvent\n) => void\n\nconst mousewheel = function (\n  element: WheelElement,\n  callback: MousewheelCallback\n) {\n  if (element && element.addEventListener) {\n    removeWheelHandler(element)\n\n    const fn = function (this: HTMLElement, event: WheelEvent) {\n      const normalized = normalizeWheel(event)\n      callback && Reflect.apply(callback, this, [event, normalized])\n    }\n\n    element[SCOPE] = { wheelHandler: fn }\n    element.addEventListener('wheel', fn, { passive: true })\n  }\n}\n\nconst removeWheelHandler = (element: WheelElement) => {\n  if (element[SCOPE]?.wheelHandler) {\n    element.removeEventListener('wheel', element[SCOPE].wheelHandler)\n    element[SCOPE] = null\n  }\n}\n\nconst Mousewheel: ObjectDirective<WheelElement, MousewheelCallback> = {\n  beforeMount(el, binding) {\n    mousewheel(el, binding.value)\n  },\n  unmounted(el) {\n    removeWheelHandler(el)\n  },\n  updated(el, binding) {\n    if (binding.value !== binding.oldValue) {\n      mousewheel(el, binding.value)\n    }\n  },\n}\n\nexport default Mousewheel\n"],"names":["normalizeWheel"],"mappings":";;;;;;;;;;AACY,MAAC,KAAK,GAAG,cAAc;AACnC,MAAM,UAAU,GAAG,SAAS,OAAO,EAAE,QAAQ,EAAE;AAC/C,EAAE,IAAI,OAAO,IAAI,OAAO,CAAC,gBAAgB,EAAE;AAC3C,IAAI,kBAAkB,CAAC,OAAO,CAAC,CAAC;AAChC,IAAI,MAAM,EAAE,GAAG,SAAS,KAAK,EAAE;AAC/B,MAAM,MAAM,UAAU,GAAGA,kCAAc,CAAC,KAAK,CAAC,CAAC;AAC/C,MAAM,QAAQ,IAAI,OAAO,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,CAAC,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC;AACrE,KAAK,CAAC;AACN,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,EAAE,YAAY,EAAE,EAAE,EAAE,CAAC;AAC1C,IAAI,OAAO,CAAC,gBAAgB,CAAC,OAAO,EAAE,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;AAC7D,GAAG;AACH,CAAC,CAAC;AACF,MAAM,kBAAkB,GAAG,CAAC,OAAO,KAAK;AACxC,EAAE,IAAI,EAAE,CAAC;AACT,EAAE,IAAI,CAAC,EAAE,GAAG,OAAO,CAAC,KAAK,CAAC,KAAK,IAAI,GAAG,KAAK,CAAC,GAAG,EAAE,CAAC,YAAY,EAAE;AAChE,IAAI,OAAO,CAAC,mBAAmB,CAAC,OAAO,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,CAAC;AACtE,IAAI,OAAO,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC;AAC1B,GAAG;AACH,CAAC,CAAC;AACG,MAAC,UAAU,GAAG;AACnB,EAAE,WAAW,CAAC,EAAE,EAAE,OAAO,EAAE;AAC3B,IAAI,UAAU,CAAC,EAAE,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;AAClC,GAAG;AACH,EAAE,SAAS,CAAC,EAAE,EAAE;AAChB,IAAI,kBAAkB,CAAC,EAAE,CAAC,CAAC;AAC3B,GAAG;AACH,EAAE,OAAO,CAAC,EAAE,EAAE,OAAO,EAAE;AACvB,IAAI,IAAI,OAAO,CAAC,KAAK,KAAK,OAAO,CAAC,QAAQ,EAAE;AAC5C,MAAM,UAAU,CAAC,EAAE,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;AACpC,KAAK;AACL,GAAG;AACH;;;;;"}