{"version":3,"file":"color-picker-panel2.mjs","sources":["../../../../../../packages/components/color-picker-panel/src/color-picker-panel.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"[ns.b(), ns.is('disabled', disabled), ns.is('border', border)]\"\n    @focusout=\"handleFocusout\"\n  >\n    <div :class=\"ns.e('wrapper')\">\n      <hue-slider\n        ref=\"hueRef\"\n        class=\"hue-slider\"\n        :color=\"color\"\n        vertical\n        :disabled=\"disabled\"\n      />\n      <sv-panel ref=\"svRef\" :color=\"color\" :disabled=\"disabled\" />\n    </div>\n    <alpha-slider\n      v-if=\"showAlpha\"\n      ref=\"alphaRef\"\n      :color=\"color\"\n      :disabled=\"disabled\"\n    />\n    <predefine\n      v-if=\"predefine\"\n      ref=\"predefine\"\n      :enable-alpha=\"showAlpha\"\n      :color=\"color\"\n      :colors=\"predefine\"\n      :disabled=\"disabled\"\n    />\n    <div :class=\"ns.e('footer')\">\n      <el-input\n        ref=\"inputRef\"\n        v-model=\"customInput\"\n        :validate-event=\"false\"\n        size=\"small\"\n        :disabled=\"disabled\"\n        @change=\"handleConfirm\"\n      />\n      <slot name=\"footer\" />\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, inject, nextTick, onMounted, provide, ref, watch } from 'vue'\nimport { ElInput } from '@element-plus/components/input'\nimport { useFormDisabled, useFormItem } from '@element-plus/components/form'\nimport { useNamespace } from '@element-plus/hooks'\nimport { debugWarn } from '@element-plus/utils'\nimport { UPDATE_MODEL_EVENT } from '@element-plus/constants'\nimport AlphaSlider from './components/alpha-slider.vue'\nimport HueSlider from './components/hue-slider.vue'\nimport Predefine from './components/predefine.vue'\nimport SvPanel from './components/sv-panel.vue'\nimport {\n  ROOT_COMMON_COLOR_INJECTION_KEY,\n  colorPickerPanelContextKey,\n  colorPickerPanelEmits,\n  colorPickerPanelProps,\n} from './color-picker-panel'\nimport { useCommonColor } from './composables/use-common-color'\n\nimport type { InputInstance } from '@element-plus/components/input'\n\ndefineOptions({\n  name: 'ElColorPickerPanel',\n})\nconst props = defineProps(colorPickerPanelProps)\nconst emit = defineEmits(colorPickerPanelEmits)\n\nconst ns = useNamespace('color-picker-panel')\nconst { formItem } = useFormItem()\nconst disabled = useFormDisabled()\nconst hueRef = ref<InstanceType<typeof HueSlider>>()\nconst svRef = ref<InstanceType<typeof SvPanel>>()\nconst alphaRef = ref<InstanceType<typeof AlphaSlider>>()\nconst inputRef = ref<InputInstance>()\nconst customInput = ref('')\n\nconst { color } = inject(\n  ROOT_COMMON_COLOR_INJECTION_KEY,\n  () => useCommonColor(props, emit),\n  true\n)\n\nfunction handleConfirm() {\n  color.fromString(customInput.value)\n  if (color.value !== customInput.value) {\n    customInput.value = color.value\n  }\n}\n\nfunction handleFocusout() {\n  if (props.validateEvent) {\n    formItem?.validate?.('blur').catch((err) => debugWarn(err))\n  }\n}\n\nfunction update() {\n  hueRef.value?.update()\n  svRef.value?.update()\n  alphaRef.value?.update()\n}\n\nonMounted(() => {\n  if (props.modelValue) {\n    customInput.value = color.value\n  }\n  nextTick(update)\n})\n\nwatch(\n  () => props.modelValue,\n  (newVal) => {\n    if (newVal !== color.value) {\n      newVal ? color.fromString(newVal) : color.clear()\n    }\n  }\n)\n\nwatch(\n  () => color.value,\n  (val) => {\n    emit(UPDATE_MODEL_EVENT, val)\n    customInput.value = val\n    if (props.validateEvent) {\n      formItem?.validate('change').catch((err) => debugWarn(err))\n    }\n  }\n)\n\nprovide(colorPickerPanelContextKey, {\n  currentColor: computed(() => color.value),\n})\n\ndefineExpose({\n  /**\n   * @description current color object\n   */\n  color,\n  /**\n   * @description custom input ref\n   */\n  inputRef,\n  /**\n   * @description update sub components\n   */\n  update,\n})\n</script>\n"],"names":["_openBlock","_createElementBlock","_normalizeClass","_unref","_createElementVNode","_createVNode"],"mappings":"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"}